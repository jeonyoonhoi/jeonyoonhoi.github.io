---
layout: post
title:  "서버관리"
subtitle:   "2021-01-09-study-server mgmt"
categories: study
tags: server
comments: true
---

서버관리자를 인수받을 때만 해도,,, 할 일이 없다고,, 실제로 이년넘게 별일 안했다고 들었다. 하지만 새로운 프로젝트가 시작되고, GPU 서버가 두 대 들어오게 되면서, 기존 서버들에 대한 전수조사와 관리를 하게 되었다. 내가 받은 인수인계는 그저 id와 pw를 포함한 기본적인 정보가 적혀 있는 엑셀파일 그리고 '이 서버는 원래 작동 안해요, 안써요' 가 전부였다. 덕분에 A to Z 로 공부를 많이 할 수 있었다. 구글링과 함께,, 장비 사장님과 함께,, 선배들 도움과 함께,, 정말 모두에게 감사를 드린다. 사계절 시원한 서버실에서 삽질하던 그 시간들을 흘려보내지 않기 위해 이번에 알게 된 것들을 기록해둔다.

# 서버관리 문서



### **기본 정보**

- 우리연구실 서버 전체 정보
- 서버 별 접근 방법 및 특징

# **문제 상황 및 조치**

## 정전과 연결 끊김

한 때 에어컨 고장으로 온도가 올라간 서버실에서 정전이 난 적이 있었다. 정전 복구 후에도 연결이 안 되었었는데 결과적으로 문제의 원인은 '허브고장' 이었다. 이번 서버관리자를 하면서 느꼈던 것은 은근히 하드웨어 고장 등이 문제의 원인일 경우가 많다. 온도가 높아지면서 네트워크 장치에 고장이 났고, 연결이 되어 있던 모든 서버들이 다 접속이 불가했던 것이다.

해결 과정

- 원격접속연결에서 뜨는 오류 메세지가 평소랑 달랐음. 이것을 구글링해봄
- 직접 서버실 가서 입출력 장치를 연결해서 보니 또 작동 자체에는 문제가 없다는 것을 파악함
- **허브를 교체** 해 보았더니 작동이 올바르게 됨.

## 스위치 연결 문제

서버설치와 함께, 옆 랙에서 끌어다 쓰던 포트가 부족해져서 우리가 추가로 스위치를 구매했다. 스위치는 특별히 세팅 해 줄 필요가 없다. 만약 여기서 문제가 생긴다면 가능성이 있는 부분은,

1. 랜선 불량
2. 들어오는 랜선 확인(초반에 옆 랙에서 끌어온 선이 안되는게 문제였다)

구글링 하다보니 보통 구글의 자료들은 가정집, iptime +1 ip 와 관련한 글들이 대부분이었는데, 현재의 상황과 약간 달랐다.  내가 관리하는 서버들은 학교 내부에서 구역별 Gateway 들이 있고, ip를 할당 받고, 장비 자체에서 static으로 ip를 설정해 준 뒤, 교내 정보통신팀에서 장치 등록 절차를 거쳐야 사용이 가능했다. 이것도 모르고 스위치 설치해주신 사장님한테 사장님 장치가 이상한 것 같아요 인터넷이 안되요.. 하면서 SOS 쳤더니 맥주소인증? 정보통신팀에 연결해서 디바이스 등록? 등의 절차는 거쳤냐고 물어보셨다. 정말 감사합니다. (자세한 절차는 ip 등록, 새 장치 등록에서 다룰 예정)

- 스위치 특징

  - Ref

    - [공유기와 허브의 차이점과 사용방법](https://kkdww.tistory.com/151)

      공유기는 IP를 할당하고, 허브는 할당된 IP를 많은 장치가 사용할 수 있도록 분배하는 장치.

      위 링크에 등장하는 공유기와 허브 활용 예 그림 두장이 이해하기에 좋아서 끌어다 둠.

    - [홈네트워크 구축](http://blog.daum.net/sejuni2002/255)

      스위치 사용법 자체를 찾다가 발견한 블로그... 홈 네트워크를 24포트 스위치로 하셨고, 매우 자세히 적어둔 글인데 2013년도 글이고 '홈'네트워크라는 것에서 놀라울 뿐이다.

## 원격 데스크톱 연결 오류

위와 같은 메세지가 나오는게 일반적이다. 그 외의 메세지가 나온다면 오히려 좋다. 더 확실한 원인을 찾을 수 있기에 구글링을 해본다.

- 해결법
  1. putty 로 연결 해보자. 윈도우 원격데스크톱 연결로는 실패해도 putty 로 되는 경우 많음. (개별 접속 법에서 상세히 서술)
  2. 장비가 켜져 있는지 확인
  3. 인터넷은 잘 되는지 확인
  4. 방화벽 문제일 수도 있음.

## 기타 **문제 해결**

- centos 7 minimal 버전 혹은 /centos 6 버전일 경우 지원 종료됨에 따라 오류 날 수 있음

  `$ yum install ~~ open ssh-server`

  [CentOS 6 yum update 오류해결방법](https://lhjin.tistory.com/entry/CentOS-6-yum-update-오류-해결-방법)
